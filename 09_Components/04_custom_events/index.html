<!--
https://jp.vuejs.org/v2/guide/components.html#カスタムイベント
https://vuejs.org/v2/guide/components.html#Custom-Events
-->
<html>
<head>
  <meta charset="UTF-8">
  <title>Components - Custom Events</title>
  <script src="http://unpkg.com/vue"></script>
</head>
<body>

<!-- Using v-on with Custom Events -->
<div id="counter-event-example">
  <p>{{ total }}</p>
  <button-counter v-on:increment="incrementTotal"></button-counter>
  <button-counter v-on:increment="incrementTotal"></button-counter>
</div>

<hr>

<!-- Binding Native Events to Components -->
<div id="native-event-example">
  <my-component v-on:click.native="doTheThing"></my-component>
</div>

<hr>

<!-- `.sync` Modifier -->
<div id="sync-modifier-example">
  <comp :foo.sync="bar"></comp>
  <comp :foo="bar" @update:foo="val => bar = val"></comp>
</div>

<hr>

<script>
  // Using v-on with Custom Events
  Vue.component('button-counter', {
    template: '<button v-on:click="incrementCounter">{{ counter }}</button>',
    data: function () {
      return {
        counter: 0
      }
    },
    methods: {
      incrementCounter: function () {
        this.counter += 1
        this.$emit('increment')
      }
    }
  })

  var counterEventExample = new Vue({
    el: '#counter-event-example',
    data: {
      total: 0
    },
    methods: {
      incrementTotal: function () {
        this.total += 1
      }
    }
  })


  // Binding Native Events to Components
  Vue.component('my-component', {
    template: '<button>Native Event</button>'
  })

  var nativeEventExample = new Vue({
    el: '#native-event-example',
    methods: {
      doTheThing: function (event) {
        console.log(event)
      }
    }
  })


  // `.sync` Modifier
  Vue.component('comp', {
    props: ['foo'],
    template: '<button v-on:click="syncValue">{{ foo }}</button>',
    methods: {
      syncValue: function () {
        var newValue = this.foo + 1
        this.$emit('update:foo', newValue)
      }
    }
  })

  var syncModifierExample = new Vue({
    el: '#sync-modifier-example',
    data: {
      bar: 0
    }
  })

</script>
</body>
</html>